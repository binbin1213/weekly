/**
 * Swiss Modernism 2.0 Design System
 * 科技爱好者周刊 - 严格网格系统 + 数学间距 + 清晰层次
 */

:root {
  /* Swiss Modernism 2.0 色彩系统 */
  --vp-c-brand: #3B82F6;
  --vp-c-brand-light: #60A5FA;
  --vp-c-brand-lighter: #93C5FD;
  --vp-c-brand-dark: #2563EB;
  --vp-c-brand-darker: #1D4ED8;

  /* 设计系统变量 */
  --grid-columns: 12;
  --grid-gap: 1rem;
  --base-unit: 8px;
  --content-max-width: 65ch;
  --sidebar-width: 240px;
  --font-size-base: 16px;
  --line-height-text: 1.75;
  --spacing-section: 2rem;

  /* 颜色对比度优化 (WCAG AA 4.5:1) */
  --color-text-primary: #111827;
  --color-text-secondary: #4B5563;
  --color-text-muted: #6B7280;
  --color-bg-primary: #FFFFFF;
  --color-bg-secondary: #F9FAFB;
  --color-border: #E5E7EB;
}

/* 优化中文字体 */
:root {
  --vp-font-family-base: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Source Han Sans CN", "Microsoft YaHei", sans-serif;
}

/* ============================================
   第一阶段：核心可读性改进
   ============================================ */

/* 文章内容容器 - 内容宽度限制 + 颜色对比度 + 行高优化 */
.vp-doc {
  /* 内容宽度限制：65-75字符，最佳阅读体验 */
  max-width: var(--content-max-width);
  margin: 0 auto;

  /* 颜色对比度优化：WCAG AA 4.5:1 */
  color: var(--color-text-primary);

  /* 行高优化：提升可读性 */
  line-height: var(--line-height-text);

  /* 字体大小 */
  font-size: var(--font-size-base);
}

/* 段落优化 */
.vp-doc p {
  margin-bottom: 1.5em;
  color: var(--color-text-secondary);
}

/* 标题层次系统 */
.vp-doc h1 {
  border-bottom: 2px solid var(--color-border);
  padding-bottom: 0.3em;
  margin-top: 2em;
  margin-bottom: 1em;
  color: var(--color-text-primary);
  font-weight: 700;
  line-height: 1.3;
}

.vp-doc h2 {
  margin-top: 2em;
  margin-bottom: 1em;
  border-bottom: 1px solid var(--color-border);
  padding-bottom: 0.3em;
  color: var(--color-text-primary);
  font-weight: 600;
  line-height: 1.4;
}

.vp-doc h3 {
  margin-top: 1.5em;
  margin-bottom: 0.75em;
  color: var(--color-text-primary);
  font-weight: 600;
  line-height: 1.4;
}

.vp-doc h4,
.vp-doc h5,
.vp-doc h6 {
  margin-top: 1.25em;
  margin-bottom: 0.5em;
  color: var(--color-text-primary);
  font-weight: 600;
}

/* ============================================
   第二阶段：视觉层次优化
   ============================================ */

/* 图片优化 - 防止内容跳跃 + 响应式 */
.vp-doc img {
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  margin: 1.5em 0;
  max-width: 100%;
  height: auto;
  /* 预设图片尺寸，防止布局偏移 */
  aspect-ratio: attr(width) / attr(height);
}

/* 链接样式 - 更好的可访问性 */
.vp-doc a {
  font-weight: 500;
  text-decoration: none;
  color: var(--vp-c-brand);
  transition: color 0.2s ease, text-decoration 0.2s ease;
  border-bottom: 1px solid transparent;
}

.vp-doc a:hover {
  color: var(--vp-c-brand-dark);
  text-decoration: underline;
  border-bottom-color: var(--vp-c-brand-dark);
}

.vp-doc a:focus {
  outline: 2px solid var(--vp-c-brand);
  outline-offset: 2px;
}

/* 引用块样式 - Swiss Modernism 2.0 */
.vp-doc blockquote {
  border-left: 4px solid var(--vp-c-brand);
  background-color: var(--color-bg-secondary);
  padding: 1em 1.5em;
  margin: 1.5em 0;
  color: var(--color-text-secondary);
  border-radius: 0 4px 4px 0;
}

/* 代码块样式优化 */
.vp-doc div[class*='language-'] {
  border-radius: 8px;
  margin: 1.5em 0;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* 行内代码 */
.vp-doc code {
  background-color: var(--color-bg-secondary);
  padding: 0.2em 0.4em;
  border-radius: 4px;
  font-size: 0.9em;
  color: var(--vp-c-brand-dark);
}

/* ============================================
   侧边栏优化 - Swiss Modernism 2.0
   ============================================ */

.VPSidebar {
  width: var(--sidebar-width);
  flex-shrink: 0;
  padding-top: 1em;
}

/* 侧边栏链接 - 当前页面高亮 */
.VPSidebar .cur {
  color: var(--vp-c-brand) !important;
  font-weight: 600;
  border-left: 3px solid var(--vp-c-brand);
  background-color: var(--color-bg-secondary);
  padding-left: calc(1rem - 3px);
}

/* 侧边栏链接悬停效果 */
.VPSidebar .item:hover {
  color: var(--vp-c-brand);
  background-color: var(--color-bg-secondary);
  transition: all 0.2s ease;
}

/* ============================================
   第三阶段：移动端响应式优化
   ============================================ */

@media (max-width: 768px) {
  :root {
    /* 移动端调整字体大小 */
    --font-size-base: 16px;
    --content-max-width: 100%;
    --spacing-section: 1.5rem;
  }

  .vp-doc {
    font-size: var(--font-size-base);
    padding: 0 1rem;
    line-height: 1.75;
  }

  .VPSidebar {
    /* 移动端隐藏侧边栏（使用抽屉式导航） */
    position: fixed;
    transform: translateX(-100%);
    transition: transform 300ms ease;
    z-index: 100;
    width: var(--sidebar-width);
    height: 100vh;
    background-color: var(--color-bg-primary);
    box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
  }

  .VPSidebar.open {
    transform: translateX(0);
  }

  /* 移动端图片优化 */
  .vp-doc img {
    border-radius: 4px;
    margin: 1em 0;
  }

  /* 触摸目标最小尺寸 (44x44px) */
  .vp-doc a,
  button,
  .clickable {
    min-height: 44px;
    min-width: 44px;
    display: inline-flex;
    align-items: center;
  }
}

@media (max-width: 480px) {
  .vp-doc {
    font-size: 15px; /* 小屏幕适当减小 */
    padding: 0 0.75rem;
  }

  .vp-doc h1 {
    font-size: 1.75em;
  }

  .vp-doc h2 {
    font-size: 1.5em;
  }

  .vp-doc h3 {
    font-size: 1.25em;
  }
}

/* 打印样式 */
@media print {
  .VPNav,
  .VPSidebar,
  .VPFooter {
    display: none !important;
  }
  
  .vp-doc {
    max-width: 100% !important;
  }
}

/* ============================================
   其他组件优化
   ============================================ */

/* RSS 订阅按钮样式 - Swiss Modernism 2.0 */
.rss-link {
  display: inline-flex;
  align-items: center;
  gap: 0.5em;
  padding: 0.625em 1.25em;
  background-color: var(--vp-c-brand);
  color: #FFFFFF;
  border-radius: 6px;
  text-decoration: none;
  font-weight: 600;
  transition: all 0.2s ease;
  border: none;
  cursor: pointer;
}

.rss-link:hover {
  background-color: var(--vp-c-brand-dark);
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
}

.rss-link:focus {
  outline: 2px solid var(--vp-c-brand);
  outline-offset: 2px;
}

/* 文章目录增强 - Swiss Modernism 2.0 */
.vp-doc .table-of-contents {
  background-color: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-left: 4px solid var(--vp-c-brand);
  border-radius: 8px;
  padding: 1.5em;
  margin: 2em 0;
}

.vp-doc .table-of-contents h2 {
  margin-top: 0;
  border: none;
  padding-bottom: 0;
  color: var(--color-text-primary);
}

/* 列表样式优化 */
.vp-doc ul,
.vp-doc ol {
  margin-bottom: 1.5em;
  padding-left: 1.5em;
  color: var(--color-text-secondary);
}

.vp-doc li {
  margin-bottom: 0.5em;
  line-height: 1.75;
}

/* 表格样式优化 */
.vp-doc table {
  border-collapse: collapse;
  width: 100%;
  margin: 1.5em 0;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.vp-doc th,
.vp-doc td {
  padding: 0.75em 1em;
  text-align: left;
  border-bottom: 1px solid var(--color-border);
}

.vp-doc th {
  background-color: var(--color-bg-secondary);
  font-weight: 600;
  color: var(--color-text-primary);
}

.vp-doc tr:hover {
  background-color: var(--color-bg-secondary);
}

/* 平滑滚动 */
html {
  scroll-behavior: smooth;
}

/* 焦点可见性 - 可访问性 */
:focus-visible {
  outline: 2px solid var(--vp-c-brand);
  outline-offset: 2px;
}

/* 跳过导航链接（键盘用户） */
.skip-to-content {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--vp-c-brand);
  color: white;
  padding: 8px;
  z-index: 1000;
  text-decoration: none;
  font-weight: 600;
}

.skip-to-content:focus {
  top: 0;
}

