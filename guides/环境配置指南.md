# ğŸ”§ Node.js ç¯å¢ƒé…ç½®æŒ‡å—

## ğŸ¤” Node.js é¡¹ç›®éœ€è¦è™šæ‹Ÿç¯å¢ƒå—ï¼Ÿ

**ç­”æ¡ˆï¼šä¸éœ€è¦ï¼** Node.js é¡¹ç›®ä¸ Python é¡¹ç›®ä¸åŒï¼š

### Python vs Node.js

| ç‰¹æ€§ | Python | Node.js |
|-----|--------|---------|
| ä¾èµ–å®‰è£…ä½ç½® | å…¨å±€æˆ–è™šæ‹Ÿç¯å¢ƒ | é¡¹ç›®æœ¬åœ° `node_modules/` |
| é¡¹ç›®éš”ç¦» | éœ€è¦ venv/virtualenv | å¤©ç„¶éš”ç¦» |
| ç‰ˆæœ¬ç®¡ç†å·¥å…· | pyenv | nvm |

### Node.js çš„ä¼˜åŠ¿

```bash
# æ¯ä¸ªé¡¹ç›®éƒ½æœ‰è‡ªå·±çš„ node_modules
project-a/
  â””â”€â”€ node_modules/  # Aé¡¹ç›®çš„ä¾èµ–

project-b/
  â””â”€â”€ node_modules/  # Bé¡¹ç›®çš„ä¾èµ–ï¼ˆå®Œå…¨ç‹¬ç«‹ï¼‰
```

---

## ğŸ¯ æ¨èæ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ nvmï¼ˆNode Version Managerï¼‰

### ä¸ºä»€ä¹ˆä½¿ç”¨ nvmï¼Ÿ
- âœ… ç®¡ç†å¤šä¸ª Node.js ç‰ˆæœ¬
- âœ… ä¸åŒé¡¹ç›®ä½¿ç”¨ä¸åŒç‰ˆæœ¬
- âœ… å¿«é€Ÿåˆ‡æ¢ç‰ˆæœ¬
- âœ… ä¸æ±¡æŸ“ç³»ç»Ÿç¯å¢ƒ

### å®‰è£… nvmï¼ˆmacOS/Linuxï¼‰

```bash
# 1. å®‰è£… nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# 2. é‡å¯ç»ˆç«¯æˆ–è¿è¡Œ
source ~/.zshrc  # å¦‚æœç”¨ zsh
# æˆ–
source ~/.bashrc  # å¦‚æœç”¨ bash

# 3. éªŒè¯å®‰è£…
nvm --version
```

### ä½¿ç”¨ nvm

```bash
# å®‰è£… Node.js 20ï¼ˆæ¨èç‰ˆæœ¬ï¼‰
nvm install 20

# ä½¿ç”¨ Node.js 20
nvm use 20

# è®¾ç½®é»˜è®¤ç‰ˆæœ¬
nvm alias default 20

# æŸ¥çœ‹å·²å®‰è£…çš„ç‰ˆæœ¬
nvm ls

# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
node --version
```

### ä¸ºé¡¹ç›®æŒ‡å®š Node.js ç‰ˆæœ¬

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.nvmrc` æ–‡ä»¶ï¼š

```bash
# åˆ›å»º .nvmrc
echo "20" > .nvmrc
```

ç„¶ååœ¨é¡¹ç›®ç›®å½•è¿è¡Œï¼š

```bash
nvm use
# è¾“å‡º: Found '/Users/binbin/Downloads/weekly/.nvmrc' with version <20>
# Now using node v20.x.x
```

---

## ğŸ¯ æ¨èæ–¹æ¡ˆäºŒï¼šä½¿ç”¨ pnpmï¼ˆæ›´é«˜æ•ˆçš„åŒ…ç®¡ç†å™¨ï¼‰

### ä¸ºä»€ä¹ˆä½¿ç”¨ pnpmï¼Ÿ
- âœ… æ¯” npm å¿« 2-3 å€
- âœ… èŠ‚çœç£ç›˜ç©ºé—´ï¼ˆç¡¬é“¾æ¥å…±äº«ä¾èµ–ï¼‰
- âœ… ä¸¥æ ¼çš„ä¾èµ–ç®¡ç†
- âœ… å®Œå…¨å…¼å®¹ npm

### å®‰è£… pnpm

```bash
# ä½¿ç”¨ npm å®‰è£…
npm install -g pnpm

# æˆ–ä½¿ç”¨ curlï¼ˆæ¨èï¼‰
curl -fsSL https://get.pnpm.io/install.sh | sh -

# éªŒè¯å®‰è£…
pnpm --version
```

### ä½¿ç”¨ pnpm

```bash
# å®‰è£…ä¾èµ–ï¼ˆæ›¿ä»£ npm installï¼‰
pnpm install

# æ·»åŠ ä¾èµ–
pnpm add vitepress

# è¿è¡Œè„šæœ¬
pnpm dev
pnpm build

# åˆ é™¤ä¾èµ–
pnpm remove package-name
```

### pnpm çš„ä¼˜åŠ¿

```bash
# npm æ–¹å¼ï¼šæ¯ä¸ªé¡¹ç›®éƒ½å®Œæ•´å¤åˆ¶ä¾èµ–
~/projects/
  project-a/node_modules/  # 500MB
  project-b/node_modules/  # 500MB
  project-c/node_modules/  # 500MB
  æ€»è®¡: 1.5GB

# pnpm æ–¹å¼ï¼šä½¿ç”¨ç¡¬é“¾æ¥å…±äº«
~/.pnpm-store/            # 500MBï¼ˆæ‰€æœ‰ä¾èµ–ï¼‰
~/projects/
  project-a/node_modules/  # é“¾æ¥åˆ° store
  project-b/node_modules/  # é“¾æ¥åˆ° store
  project-c/node_modules/  # é“¾æ¥åˆ° store
  æ€»è®¡: 500MB + å‡ MBé“¾æ¥
```

---

## ğŸ¯ æ¨èæ–¹æ¡ˆä¸‰ï¼šDockerï¼ˆå®Œå…¨éš”ç¦»ï¼‰

### é€‚åˆåœºæ™¯
- éœ€è¦å®Œå…¨ä¸€è‡´çš„å¼€å‘ç¯å¢ƒ
- å›¢é˜Ÿåä½œ
- CI/CD éƒ¨ç½²

### åˆ›å»º Dockerfile

```dockerfile
# Dockerfile
FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 5173

CMD ["npm", "run", "dev"]
```

### åˆ›å»º docker-compose.yml

```yaml
# docker-compose.yml
version: '3.8'

services:
  weekly:
    build: .
    ports:
      - "5173:5173"
    volumes:
      - .:/app
      - /app/node_modules
    environment:
      - NODE_ENV=development
```

### ä½¿ç”¨ Docker

```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose up

# åå°è¿è¡Œ
docker-compose up -d

# åœæ­¢
docker-compose down

# è¿›å…¥å®¹å™¨
docker-compose exec weekly sh
```

---

## ğŸ¯ å®é™…æ“ä½œï¼šæœ¬é¡¹ç›®æ¨èé…ç½®

### æ–¹æ¡ˆ Aï¼šç®€å•å¿«é€Ÿï¼ˆæ¨èæ–°æ‰‹ï¼‰

```bash
# 1. ç›´æ¥ä½¿ç”¨ç³»ç»Ÿçš„ Node.jsï¼ˆç¡®ä¿ç‰ˆæœ¬ >= 18ï¼‰
node --version  # æ£€æŸ¥ç‰ˆæœ¬

# 2. å®‰è£…ä¾èµ–
cd /Users/binbin/Downloads/weekly
npm install

# 3. å¯åŠ¨å¼€å‘
npm run dev
```

### æ–¹æ¡ˆ Bï¼šä½¿ç”¨ nvm + npmï¼ˆæ¨èï¼‰

```bash
# 1. å®‰è£… nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# 2. å®‰è£… Node.js 20
nvm install 20
nvm use 20

# 3. ä¸ºé¡¹ç›®åˆ›å»º .nvmrc
cd /Users/binbin/Downloads/weekly
echo "20" > .nvmrc

# 4. å®‰è£…ä¾èµ–
npm install

# 5. å¯åŠ¨å¼€å‘
npm run dev
```

### æ–¹æ¡ˆ Cï¼šä½¿ç”¨ nvm + pnpmï¼ˆæœ€ä½³æ€§èƒ½ï¼‰

```bash
# 1. å®‰è£… nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# 2. å®‰è£… Node.js 20
nvm install 20
nvm use 20

# 3. å®‰è£… pnpm
npm install -g pnpm

# 4. ä¸ºé¡¹ç›®åˆ›å»º .nvmrc
cd /Users/binbin/Downloads/weekly
echo "20" > .nvmrc

# 5. å®‰è£…ä¾èµ–
pnpm install

# 6. å¯åŠ¨å¼€å‘
pnpm dev
```

---

## ğŸ“‹ ç¯å¢ƒæ£€æŸ¥æ¸…å•

### æ£€æŸ¥ Node.js ç‰ˆæœ¬

```bash
node --version
# åº”è¯¥ >= v18.0.0
```

### æ£€æŸ¥ npm ç‰ˆæœ¬

```bash
npm --version
# åº”è¯¥ >= 9.0.0
```

### æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®ç›®å½•

```bash
pwd
# åº”è¯¥æ˜¾ç¤º: /Users/binbin/Downloads/weekly
```

### æ£€æŸ¥ package.json æ˜¯å¦å­˜åœ¨

```bash
ls -la package.json
# åº”è¯¥æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
```

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤å¯¹ç…§è¡¨

### npm vs pnpm vs yarn

| æ“ä½œ | npm | pnpm | yarn |
|-----|-----|------|------|
| å®‰è£…ä¾èµ– | `npm install` | `pnpm install` | `yarn` |
| æ·»åŠ ä¾èµ– | `npm install pkg` | `pnpm add pkg` | `yarn add pkg` |
| åˆ é™¤ä¾èµ– | `npm uninstall pkg` | `pnpm remove pkg` | `yarn remove pkg` |
| è¿è¡Œè„šæœ¬ | `npm run dev` | `pnpm dev` | `yarn dev` |
| å…¨å±€å®‰è£… | `npm install -g pkg` | `pnpm add -g pkg` | `yarn global add pkg` |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆä¸‰é€‰ä¸€ï¼‰

### ğŸŸ¢ æ–°æ‰‹æ¨èï¼šç›´æ¥ä½¿ç”¨ npm

```bash
cd /Users/binbin/Downloads/weekly
npm install
npm run dev
```

### ğŸŸ¡ è¿›é˜¶æ¨èï¼šnvm + npm

```bash
# ä¸€æ¬¡æ€§å®‰è£… nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.zshrc

# é¡¹ç›®é…ç½®
cd /Users/binbin/Downloads/weekly
nvm install 20
nvm use 20
echo "20" > .nvmrc
npm install
npm run dev
```

### ğŸ”µ é«˜çº§æ¨èï¼šnvm + pnpm

```bash
# ä¸€æ¬¡æ€§é…ç½®
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.zshrc
nvm install 20
nvm use 20
npm install -g pnpm

# é¡¹ç›®é…ç½®
cd /Users/binbin/Downloads/weekly
echo "20" > .nvmrc
pnpm install
pnpm dev
```

---

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

### 1. ç‰ˆæœ¬ç®¡ç†
- âœ… ä½¿ç”¨ `.nvmrc` æŒ‡å®š Node.js ç‰ˆæœ¬
- âœ… åœ¨ `package.json` ä¸­æŒ‡å®š engines

```json
{
  "engines": {
    "node": ">=18.0.0",
    "npm": ">=9.0.0"
  }
}
```

### 2. ä¾èµ–é”å®š
- âœ… æäº¤ `package-lock.json` åˆ° Git
- âœ… ä½¿ç”¨ `npm ci` ä»£æ›¿ `npm install` åœ¨ CI ç¯å¢ƒ

### 3. æ¸…ç†ç¼“å­˜
```bash
# npm ç¼“å­˜æ¸…ç†
npm cache clean --force

# pnpm ç¼“å­˜æ¸…ç†
pnpm store prune

# åˆ é™¤ node_modules é‡æ–°å®‰è£…
rm -rf node_modules
npm install
```

### 4. åŠ é€Ÿå®‰è£…ï¼ˆå›½å†…ç”¨æˆ·ï¼‰
```bash
# ä½¿ç”¨æ·˜å®é•œåƒ
npm config set registry https://registry.npmmirror.com

# æˆ–ä¸´æ—¶ä½¿ç”¨
npm install --registry=https://registry.npmmirror.com
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆ npm install å¾ˆæ…¢ï¼Ÿ
**A:** ä½¿ç”¨å›½å†…é•œåƒæˆ–åˆ‡æ¢åˆ° pnpm

```bash
npm config set registry https://registry.npmmirror.com
```

### Q2: node_modules å¤ªå¤§äº†æ€ä¹ˆåŠï¼Ÿ
**A:** ä½¿ç”¨ pnpmï¼Œå¯ä»¥èŠ‚çœ 70% çš„ç©ºé—´

### Q3: ä¸åŒé¡¹ç›®éœ€è¦ä¸åŒ Node.js ç‰ˆæœ¬æ€ä¹ˆåŠï¼Ÿ
**A:** ä½¿ç”¨ nvmï¼Œæ¯ä¸ªé¡¹ç›®åˆ›å»º `.nvmrc` æ–‡ä»¶

### Q4: æˆ‘åº”è¯¥æäº¤ node_modules åˆ° Git å—ï¼Ÿ
**A:** **ä¸åº”è¯¥ï¼**å·²ç»åœ¨ `.gitignore` ä¸­å¿½ç•¥äº†

### Q5: package-lock.json è¦æäº¤å—ï¼Ÿ
**A:** **è¦ï¼**å®ƒé”å®šäº†ä¾èµ–ç‰ˆæœ¬ï¼Œä¿è¯ç¯å¢ƒä¸€è‡´

---

## ğŸ‰ å¼€å§‹å¼€å‘

é€‰æ‹©ä½ å–œæ¬¢çš„æ–¹å¼é…ç½®å¥½ç¯å¢ƒåï¼Œè¿è¡Œï¼š

```bash
npm run dev
# æˆ–
pnpm dev
```

ç„¶åè®¿é—® `http://localhost:5173` å³å¯ï¼

---

**è®°ä½ï¼šNode.js é¡¹ç›®å¤©ç„¶å°±æ˜¯éš”ç¦»çš„ï¼Œä¸éœ€è¦åƒ Python é‚£æ ·çš„è™šæ‹Ÿç¯å¢ƒï¼** âœ¨

